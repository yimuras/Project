import{b as y,d as b,e as P,k as A,l as E,m as k,n as N,o as l,p as v,q as d,s as T,t as g}from"assets/chunk-KNMSEEX6.mjs";var R;(a=>(a.isTouch="ontouchstart"in window||navigator.maxTouchPoints>0,a.isChrome=navigator.userAgent.toLowerCase().includes("chrome/"),a.isWebKit=navigator.userAgent.toLowerCase().includes("applewebkit/"),a.isSafari=a.isWebKit&&!a.isChrome,a.isSafariDesktop=a.isSafari&&!a.isTouch,a.isWindows=/Win/u.test(navigator.platform),a.isMacOS=/Mac/u.test(navigator.platform),a.isAndroidWebView=a.isChrome&&navigator.userAgent.toLowerCase().includes("; wv)"),a.isIosWebView=a.isWebKit&&!navigator.userAgent.toLowerCase().includes("safari/"),a.isWebView=a.isAndroidWebView||a.isIosWebView))(R||={});var C="framer_",m="editSite";var{createPortal:F}=E("react-dom");var X="autoplay; ambient-light-sensor; accelerometer; camera; display-capture; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; picture-in-picture; usb; xr-spatial-tracking",G="autoplay",J="autoplay; ambient-light-sensor; accelerometer; camera; display-capture; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; picture-in-picture; usb; xr-spatial-tracking; clipboard-read; clipboard-write";function M(e){let t;switch(e){case"on_page":t=G;break;case"editor":t=X;break;case"preview":t=J;break;default:T(e)}return t}var h="data-original-href",O="link[rel*='icon']",Z=`${O}:not([${h}])`,Q="assets/writing-hand-favicon.png";function D(){document.querySelectorAll(Z).forEach(e=>{e instanceof HTMLLinkElement&&(e.setAttribute(h,e.href),e.setAttribute("href",Q))})}function V(){document.querySelectorAll(O).forEach(e=>{e instanceof HTMLLinkElement&&e.getAttribute(h)&&(e.setAttribute("href",e.getAttribute(h)??""),e.removeAttribute(h))})}function L(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function B(e,t){let[o,i]=d(!1);return l(()=>{let n=r=>{if(r.origin!==e||!L(r.data))return;let{apiVersion:c,type:s,component:u}=r.data;c===1&&s==="initializeComponent"&&u===t&&i(!0)};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[e,t]),o}var x="default";var{useCurrentRoute:W,useLocaleInfo:U,useRouter:z}=E("framer");function j(){let e=W(),t=U()?.activeLocale??void 0,{collectionUtils:o}=z(),[i,n]=d(),r=e?.id,c=e?.collectionId,s=e?.pathVariables;return l(()=>{if(!r)return;let u=!1;return ee(t,c,o,s).then(f=>{u||n({collectionItemNodeId:f,webPageNodeId:r,activeLocaleId:t?.id??x})}).catch(()=>{u||n({collectionItemNodeId:void 0,webPageNodeId:r,activeLocaleId:t?.id??x})}),()=>{u=!0}},[t,c,o,s,r]),i}async function ee(e,t,o,i){if(!t)return;let n=Object.values(i??{}),[r]=n;if(n.length!==1||!r||typeof r!="string")return;let c=o?.[t];return(await c?.())?.getRecordIdBySlug(r,e)}function H(e,t){let o=j(),i=B(t,"OnPageActiveRouteStore");l(()=>{i&&e.current?.contentWindow?.postMessage({apiVersion:1,type:"updateNodeIds",nodeIds:o},t)},[e,o,t,i])}var te=Date.now();function ne(){return window.self!==window.top}var oe=`
#__framer-editorbar {
    /* https://sergeyski.com/css-color-scheme-and-iframes-lessons-learned-from-disqus-background-bug */
    color-scheme: light dark;
    overflow: hidden;
    position: fixed;
    border: none;
    z-index: calc(${b});
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    touch-action: manipulation;
}

@supports (height: 100dvh) {
    #__framer-editorbar {
        height: 100dvh;
    }
}

#__framer-editorbar.status_hidden {
    display: none;
}

#__framer-editorbar.status_visually_hidden {
    clip-path: circle(1px at calc(100% - 20px) calc(50% + 4px));
    z-index: calc(${b} - 1);
}

#__framer-editorbar.status_measuring {
    clip-path: unset;
}
`,q=document.createElement("style");q.innerHTML=oe;document.head.appendChild(q);var w=new URL(import.meta.url).origin;function re(){if(localStorage[y])return Y(),!0;let e=new URL(window.location.href),t=e.searchParams.has(m),o=e.searchParams.has(m.toLowerCase());if(!t&&!o)return!1;let i=t?m:m.toLowerCase(),n=e.searchParams.get(i);if(n!==""&&n!==null)return!1;for(let r of e.searchParams.keys())if(r!==m&&r!==m.toLowerCase()&&!r.startsWith(C))return!1;return Y(),localStorage[y]=new Date().toString(),!0}function Y(){let e=new URL(window.location.href);e.searchParams.has(m)&&(e.searchParams.delete(m),e.searchParams.delete(m.toLowerCase()),window.history.replaceState({},"",e.toString()))}var I=(()=>{try{return re()}catch(e){return console.error(e),!1}})();function K(){return null}function ie(){let e=document.getElementsByClassName("lenis-scrolling");for(let t of e)t.classList.remove("lenis-scrolling")}function ae(e){let[t,o]=d(e),i=N(()=>{"requestIdleCallback"in window?requestIdleCallback(()=>{o(!0)}):setTimeout(()=>{o(!0)},300)},[]);return l(()=>{if(!t)if(document.readyState==="complete")i();else{let n=()=>{document.readyState==="complete"&&i()};return document.addEventListener("readystatechange",n,{once:!0}),()=>{document.removeEventListener("readystatechange",n)}}},[t,i]),t}function se(e,t){let[o,i]=d(t),[n,r]=d(!0),[c,s]=d(!1),[u,f]=d("hidden"),a=v();return a.current??=new A,l(()=>{function _(p){if(p.origin===w&&typeof p.data=="object"&&p.data?.apiVersion===1)if(p.data.type==="accessResult"&&p.data.data.status==="success"){i(!0);try{localStorage[y]=new Date().toString()}catch($){console.error($)}}else p.data.type==="exitFullscreen"?(document.body.style.overflow="auto",window.scrollTo({behavior:"instant",top:p.data.position?.top??0}),f("hidden")):p.data.type==="sandboxReadyState"&&p.data.data.status==="ready"&&(r(!1),setTimeout(()=>{a.current?.resolve()},50))}return window.addEventListener("message",_),()=>{window.removeEventListener("message",_)}},[]),{showEntrypointButton:o,entrypointButtonLoading:c?n:!1,iframeState:u,onEditContent:()=>{e.current?.contentWindow?.postMessage({apiVersion:1,type:"enterOnPageEditing"},w),f("fullscreen"),s(!0),a.current?.then(()=>{e.current?.contentWindow?.postMessage({apiVersion:1,type:"showCanvas",position:{top:window.scrollY}},w),setTimeout(()=>{document.body.style.overflow="hidden"},P),s(!1)}),ie()}}}function ce({framerSiteId:e,features:t,iframeRef:o,className:i}){H(o,w);let n=new URL(import.meta.url),r=n.pathname.lastIndexOf("/");if(r<0)throw new Error("Invalid pathname");let c=t?.editorBarDisableFrameAncestorsSecurity?"fake-domain.example":window.location.hostname;return n.pathname=n.pathname.slice(0,r),n.searchParams.set("framerSiteId",e),n.searchParams.set("source",c),n.searchParams.set("features",JSON.stringify(t||{})),n.searchParams.set("loadStart",te.toString()),I&&n.searchParams.set("forceShow","true"),g("iframe",{id:"__framer-editorbar",ref:o,src:n.href,"aria-hidden":"true",allow:M("on_page"),tabIndex:-1,className:i})}var S;function ue({shouldLoad:e,...t}){e&&(S??=import("assets/EditButton-ZXMU2HEL.mjs"));let[o,i]=d(null);return l(()=>{e&&S&&S.then(n=>{i(()=>n.EditButton)}).catch(()=>{})},[e]),!e||!o?null:g(o,{...t})}function le({framerSiteId:e,features:t}){let o=v(null),i=ae(I),n=I||i,{showEntrypointButton:r,entrypointButtonLoading:c,iframeState:s,onEditContent:u}=se(o,I);if(l(()=>{if(s!=="fullscreen")return;let a=document.title;return document.title="Editing Page\u2026",D(),()=>{document.title=a,V()}},[s]),!n)return null;let f;return s==="fullscreen"?f="fullscreen":r?f="status_visually_hidden":f="status_hidden",F([g(ue,{shouldLoad:r,isLoading:c,onClick:u,isEditorVisible:s==="fullscreen"},"button"),g(ce,{framerSiteId:e,features:t,iframeRef:o,className:f},"iframe")],document.body)}function He(){return ne()?(console.log("[Framer On-Page Editing] Unavailable because site is embedded in iframe"),K):R.isWebView?(console.log("[Framer On-Page Editing] Unavailable because running in WebView"),K):k(le)}export{He as createEditorBar};
//# sourceMappingURL=assets/editorbar-initializer.QOKNDOT5.mjs.map

